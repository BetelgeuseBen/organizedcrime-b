#	allowed_to_hold: conditions for the character to hold the title
#	allowed_to_grant: conditions for a ruler to grant the title
#	regent: This is the title for regents (not really "minor")
#	gain_effect: fires when the title is granted
#	lose_effect: fires when a title is lost through most causes
#	retire_effect: fires when a title is lost due to the character stepping down
#	death_effect: fires when a title is lost due to the character dying
#	message: should fire a message to the its owner when set
#	The other fields are all character modifiers.

#######################################
# HARD: AUTO-GRANTED - DO NOT REMOVE!
#######################################
title_regent = {
	realm_in_name = yes
	dignity = 0.9
	revoke_allowed = no
	is_voter = yes
	
	monthly_salary = 0.1
	monthly_prestige = 1.50
	
	gain_effect = {
	}
	lose_effect = {
	}

	message = yes
}

title_appointed_regent = {
	is_high_prio = yes
	realm_in_name = yes
	dignity = 0.9
	grant_limit = 1
	opinion_effect = 10
	revoke_allowed = yes

	monthly_salary = 0.05
	monthly_prestige = 0.75

	allowed_to_hold = {
		is_adult = yes
		prisoner = no
		NOT = { trait = incapable }
		has_regent = no
	}
	
	allowed_to_grant = {
		has_regent = no
		NOT = {
			has_game_rule = {
				name = regencies
				value = off
			}
		}
	}
	revoke_trigger = {
		FROM = { has_regent = no }
	}

	gain_effect = {
	}

	lose_effect = {
	}
	message = yes
}

title_ruler_consort = {
	dignity = 0.88
	show_as_title = yes
	realm_in_name = yes
	spouse_context = yes # Title name as if the other gender version of the spouse's ruler title
	revoke_allowed = no
	
	monthly_salary = 0.1
	monthly_prestige = 0.5
	
	gain_effect = {
	}
	
	lose_effect = {
	}

	message = no
}

title_tanist = {
	dignity = 0.86
	show_as_title = yes
	realm_in_name = yes
	revoke_allowed = no
	
	monthly_salary = 0.07
	monthly_prestige = 0.75
	
	gain_effect = {
	}
	lose_effect = {
	}

	message = no
}

title_queen_mother = {
	dignity = 0.85
	show_as_title = yes
	realm_in_name = yes
	revoke_allowed = no
	
	monthly_salary = 0.05
	monthly_prestige = 1.00
	
	gain_effect = {
	}
	lose_effect = {
	}

	message = no
}

title_prince = {
	dignity = 0.8
	show_as_title = yes
	realm_in_name = yes
	revoke_allowed = no
	
	monthly_salary = 0.05
	monthly_prestige = 0.25
	
	gain_effect = {
	}
	lose_effect = {
	}

	message = no
}

# Pagan consort
title_courtesan = {
	dignity = 0.05
	#realm_in_name = yes
	revoke_allowed = no
	
	monthly_salary = 0.02
	monthly_prestige = 0.10
	
	gain_effect = {
	}
	lose_effect = {
	}

	message = no
}

title_male_consort = {
	dignity = 0.05
	#realm_in_name = yes
	revoke_allowed = no
	
	monthly_salary = 0.02
	monthly_prestige = 0.10
	
	gain_effect = {
	}
	lose_effect = {
	}

	message = no
}

# Commander, granted via its own interaction, so very special
title_commander = {
	is_high_prio = yes
	
	attribute = martial
	dignity = 0.05
	opinion_effect = 5
	realm_in_name = yes
	
	monthly_salary = 0.05
	monthly_prestige = 0.50
	#combat_rating = 10 # Reactivate if we get this working
	
	revoke_allowed = no # Handled by diplomatic interaction
	
	allowed_to_hold = {
		NOT = { 
			primary_title = { temporary = yes } 
		}
		liege = { character = FROM }
		OR = {
			AND = {
				OR = {
					male_can_hold_minor_title_trigger = yes
					female_can_hold_minor_commander_title_trigger = yes
				}
				OR = {
					NOT = { religion = hindu }
					trait = kshatriya
				}
				is_adult = yes
			}
			has_character_flag = special_marshal
		}
		
		prisoner = no
		NOT = { trait = incapable }
		NOT = { is_inaccessible_trigger = yes }
		NOT = { has_character_flag = guru }
		NOT = { has_character_modifier = refusing_to_lead }
		OR = { 
			NOT = { liege = { has_law = succ_byzantine_elective } }  #Either not Imperial...
			higher_real_tier_than = BARON #...Or potential commander is vassal...
			NOT = { #...Or there are no valid vassal candidates that can be commanders.
				custom_tooltip = { 
					text = tooltip_byzantine_empire_can_appoint_commanders
					liege = { 
						any_vassal = { 
							higher_real_tier_than = BARON
							NOT = { 
								primary_title = { temporary = yes } 
							}
							OR = {
								AND = {
									OR = {
										male_can_hold_minor_title_trigger = yes
										female_can_hold_minor_commander_title_trigger = yes
									}
									OR = {
										NOT = { religion = hindu }
										trait = kshatriya
									}
									is_adult = yes
								}
								has_character_flag = special_marshal
							}
							
							prisoner = no
							NOT = { trait = incapable }
							NOT = { is_inaccessible_trigger = yes }
							NOT = { has_character_flag = guru }
							NOT = { has_character_modifier = refusing_to_lead }
							NOR = {
								has_job_title = job_chancellor
								has_job_title = job_marshal
								has_job_title = job_treasurer
								has_job_title = job_spymaster
								has_job_title = job_spiritual
								has_minor_title = title_commander
							}
						} 
					} 
				} 
			}
		}
	}
	
	gain_effect = {
		if = {
			limit = {
				liege = { 
					has_law = succ_byzantine_elective 
				}
			}
			character_event = { id = HFP.20805 days = 1 } 
		}
		hidden_effect = { # Because this cannot be added in the passive effects, for some code reason
			add_character_modifier = {
	        	name = hidden_commander_bonus
	        	duration = -1
	        	hidden = yes
	        }
		}
	}
	lose_effect = {
		if = {
			limit = {
				liege = { has_law = succ_byzantine_elective }
			}
			character_event = { id = HFP.20803 days = 1 } #Make sure the commander is not being made a sub-vassal.
			
		}
		hidden_effect = {
			remove_character_modifier = hidden_commander_bonus
		}
	}
	
	message = yes
}